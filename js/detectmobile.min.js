var detectmobile={redirectCallback:null,defaultMobileURL:null,mobileSiteDomainIdentifiers:["m","mobi"],thresholdWidthInPixels:970,cookieName:"detectmobilesticky",forceWebParameter:"force-web",forceMobileParameter:"force-mobile",stripDomains:["www","www2","www3","m","mobi"],process:function(){var e=window.location.href,t=this.splitURLParameters(e),i=this.readCookie(this.cookieName);if(this.forceWebParameter in t)return void this.createCookie(this.cookieName,"true");if(i){if(!(this.forceMobileParameter in t))return;this.eraseCookie(this.cookieName)}if(!this.isOnMobileSite()&&(this.detectMobile()||this.forceMobileParameter in t)){var r=this.getRedirectTarget("mobile",e);this.performRedirect(r)}},getRedirectTarget:function(e,t){var i=null;if(this.redirectCallback?i=this.redirectCallback(e,t):"mobile"==e&&(i=this.defaultMobileURL),!i)throw"Cannot redirect to "+e+" because target URL cannot be resolved by detectmobile.js";return i},performRedirect:function(e){return e==window.location.href?void window.location.reload():void(window.location=e)},replaceDomainName:function(e,t,i){var r;if("http"!=e.substring(0,4))throw"Only absolute http/https URLs supported";var o=e.split("/");if(o.length<2)throw"Cannot understand:"+e;var n=o[2];hostparts=n.split(":");var s=hostparts[0];for(r=0;r<this.stripDomains.length;r++){var a=this.stripDomains[r];if(0==s.indexOf(a+".")){s=s.substring(a.length+1);break}}i&&(t=t+"."+s),hostparts=hostparts.length>1?[t,hostparts[1]]:[t];for(var n=hostparts.join(":"),l=[o[0],o[1],n],r=3;r<o.length;r++)l.push(o[r]);return l.join("/")},addURLParameter:function(e,t){var i=mobilize.getUrlVars(e),r=e.split("?",1)[0];r+="?";for(var o=[],n=0;n<i.length;n++){var s=i[n],a=i[s];o.push(s+"="+a)}return o.push(t),r+=o.join("&")},splitURLParameters:function(e){if(this._urlvars||(this._urlvars={}),e||(e=window.location.href),this._urlvars[e])return this._urlvars[e];var t,i=[];e.indexOf("#")>=0&&(e=e.slice(0,e.indexOf("#")));for(var r=e.slice(e.indexOf("?")+1).split("&"),o=0;o<r.length;o++)t=r[o].split("="),i.push(t[0]),i[t[0]]=t[1];return this._urlvars[e]=i,i},createCookie:function(e,t,i){var r="";if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),r="; expires="+o.toGMTString()}document.cookie=e+"="+t+r+"; path=/"},readCookie:function(e){for(var t=e+"=",i=document.cookie.split(";"),r=0;r<i.length;r++){for(var o=i[r];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null},eraseCookie:function(e){this.createCookie(e,"",-1)},detectMobile:function(){var e=this.getScreenDimensions(),t=Math.max(e.width,e.height);return t<=this.thresholdWidthInPixels?!0:!1},getScreenDimensions:function(){return{width:window.screen.availWidth,height:window.screen.availHeight}},isOnMobileSite:function(){for(var e=window.location.hostname,t=e.split("."),i=0;i<t.length;i++)for(var r=0;r<this.mobileSiteDomainIdentifiers.length;r++)if(t[i]==this.mobileSiteDomainIdentifiers[r])return!0;return!1}};